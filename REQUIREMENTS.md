# miniPDFSign

Мобильное приложение для iOS и Android для просмотра PDF-документов и размещения на них изображений (штампов, подписей, печатей).

## Платформы

| Платформа | Минимальная версия    |
| --------- | --------------------- |
| iOS       | 14.0+                 |
| Android   | API 24 (Android 7.0)+ |

**Ориентация:** Portrait и Landscape

**Целевые устройства:** Смартфоны (iPhone, Android phones). Планшеты (iPad, Android tablets) — в будущих версиях.

------

## Возможности

- Просмотр PDF-документов с непрерывной прокруткой
- Размещение изображений (штампов, подписей) на страницах PDF
- Глобальная библиотека изображений с синхронизацией
- Экспорт/Share PDF с внедрёнными изображениями
- Поддержка 50+ языков интерфейса, включая RTL
- Минималистичный интерфейс без лишних элементов

------

## Интерфейс

### Навигация приложения

```
┌─────────────────┐
│   Home Screen   │
│                 │
│  [Open PDF]     │
│  Recent Files   │
└────────┬────────┘
         │
         ▼ (открыть PDF)
┌─────────────────┐
│   PDF Viewer    │
│                 │
│  + Bottom Sheet │
│    (Library)    │
└─────────────────┘
```

Приложение работает с **одним документом** за раз. Кнопка "назад" закрывает документ и возвращает на Home Screen.

------

### Home Screen

Главный экран приложения при запуске:

```
┌─────────────────────────────────────┐
│                                     │
│                                     │
│           [App Icon]                │
│                                     │
│      ┌─────────────────────┐        │
│      │      Open PDF       │        │
│      └─────────────────────┘        │
│                                     │
│  Recent:                            │
│  ┌─────────────────────────────┐    │
│  │ 📄 Report.pdf               │    │
│  │    Yesterday                │    │
│  ├─────────────────────────────┤    │
│  │ 📄 Contract.pdf             │    │
│  │    2 days ago               │    │
│  ├─────────────────────────────┤    │
│  │ 📄 Invoice.pdf              │    │
│  │    Last week                │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

**Компоненты:**

| Компонент    | Описание                                         |
| ------------ | ------------------------------------------------ |
| App Icon     | Иконка приложения в центре верхней части         |
| Open PDF     | Основная кнопка, открывает системный file picker |
| Recent Files | Список недавно открытых файлов (до 12)           |

**Поведение Recent Files:**

- Tap по файлу — открывает документ в PDF Viewer
- Список сортируется по дате последнего открытия (новые сверху)
- Показывается название файла и относительная дата ("Yesterday", "2 days ago")
- При попытке открыть несуществующий файл — показывается ошибка, файл удаляется из списка

**Пустое состояние (нет Recent Files):**

```
┌─────────────────────────────────────┐
│                                     │
│           [App Icon]                │
│                                     │
│      ┌─────────────────────┐        │
│      │      Open PDF       │        │
│      └─────────────────────┘        │
│                                     │
│      Open a PDF to get started      │
│                                     │
└─────────────────────────────────────┘
```

------

### PDF Viewer

Основной экран работы с документом:

```
┌─────────────────────────────────────┐
│  [←]    Report.pdf          [Share] │ ← AppBar
├─────────────────────────────────────┤
│                                     │
│                                     │
│                                     │
│            PDF Document             │
│          (continuous scroll)        │
│                                     │
│                                     │
│         [Page 3 of 10]              │ ← Page indicator
│                                     │
│                                     │
├─────────────────────────────────────┤
│  ══════════════════════════════════ │ ← Drag handle
│  ┌─────┐ ┌─────┐ ┌─────┐    ┌───┐  │ ← Bottom Sheet
│  │img1 │ │img2 │ │img3 │    │ + │  │    (collapsed)
│  └─────┘ └─────┘ └─────┘    └───┘  │
└─────────────────────────────────────┘
```

**AppBar (обычное состояние):**

| Элемент  | Описание                                         |
| -------- | ------------------------------------------------ |
| [←] Back | Закрыть документ, вернуться на Home Screen       |
| Title    | Название файла (обрезается с "..." если длинное) |
| [Share]  | Кнопка экспорта/отправки документа               |

**AppBar (при выделенном изображении):**

```
┌─────────────────────────────────────┐
│  [←]    Report.pdf    [Delete][Share]│
└─────────────────────────────────────┘
```

Кнопка Delete появляется только когда выделено размещённое изображение.

**Компоненты PDF Viewer:**

| Компонент      | Описание                                   |
| -------------- | ------------------------------------------ |
| PDF Area       | Область просмотра с непрерывной прокруткой |
| Page Indicator | Плавающий индикатор "Page X of Y"          |
| Bottom Sheet   | Выдвижная панель с библиотекой изображений |
| Drag Handle    | Полоса для управления Bottom Sheet         |

------

### Page Indicator

Плавающий виджет, показывающий текущую страницу:

- Формат: "Page X of Y"
- Позиция: центр нижней части области PDF (над Bottom Sheet)
- Появляется при прокрутке
- Автоматически скрывается через 2 секунды после остановки прокрутки
- Полупрозрачный фон для читаемости на любом контенте

```
┌───────────────────┐
│   Page 3 of 10    │
└───────────────────┘
```

------

### Bottom Sheet (Image Library)

Выдвижная панель снизу экрана с библиотекой изображений.

**Три состояния:**

1. **Collapsed (свёрнутое)** — одна строка превью
2. **Half-expanded (полуразвёрнутое)** — ~40% экрана
3. **Expanded (развёрнутое)** — ~85% экрана

**Управление:**

- Drag за handle (═══) вверх/вниз для изменения состояния
- При перетаскивании изображения на PDF — автоматически сворачивается

#### Collapsed состояние

```
┌─────────────────────────────────────┐
│  ══════════════════════════════════ │ ← Drag handle (40×4 px, скруглённый)
│  ┌─────┐ ┌─────┐ ┌─────┐    ┌───┐  │
│  │img1 │ │img2 │ │img3 │ ▸▸ │ + │  │ ← Горизонтальный scroll
│  └─────┘ └─────┘ └─────┘    └───┘  │
└─────────────────────────────────────┘
```

- Высота: ~80 px
- Горизонтальный скролл превью
- Кнопка [+] всегда видна справа
- Индикатор "▸▸" если есть ещё изображения справа

#### Half-expanded состояние

```
┌─────────────────────────────────────┐
│  ══════════════════════════════════ │
│                                     │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐   │
│  │img1 │ │img2 │ │img3 │ │img4 │   │
│  └─────┘ └─────┘ └─────┘ └─────┘   │
│                                     │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐   │
│  │img5 │ │img6 │ │img7 │ │ +   │   │
│  └─────┘ └─────┘ └─────┘ └─────┘   │
│                                     │
└─────────────────────────────────────┘
```

- Сетка изображений (grid)
- 4 колонки на phone (адаптивно)
- Вертикальный скролл
- Кнопка [+] в конце сетки

#### Expanded состояние

```
┌─────────────────────────────────────┐
│  ══════════════════════════════════ │
│                                     │
│  Images                      [Edit] │ ← Заголовок + режим редактирования
│                                     │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐   │
│  │img1 │ │img2 │ │img3 │ │img4 │   │
│  └─────┘ └─────┘ └─────┘ └─────┘   │
│                                     │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐   │
│  │img5 │ │img6 │ │img7 │ │img8 │   │
│  └─────┘ └─────┘ └─────┘ └─────┘   │
│                                     │
│  ┌─────┐                            │
│  │ +   │  Add image                 │
│  └─────┘                            │
│                                     │
└─────────────────────────────────────┘
```

- Заголовок "Images"
- Кнопка [Edit] для режима удаления изображений из библиотеки
- Увеличенные превью
- Подпись "Add image" у кнопки [+]

#### Пустое состояние библиотеки

```
┌─────────────────────────────────────┐
│  ══════════════════════════════════ │
│                                     │
│           [image icon]              │
│                                     │
│       No images yet                 │
│                                     │
│    Tap + to add your first          │
│    stamp or signature               │
│                                     │
│           ┌───────┐                 │
│           │   +   │                 │
│           └───────┘                 │
│                                     │
└─────────────────────────────────────┘
```

#### Edit Mode (режим редактирования библиотеки)

При нажатии [Edit] в expanded состоянии:

```
┌─────────────────────────────────────┐
│  ══════════════════════════════════ │
│                                     │
│  Select images              [Done]  │
│                                     │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐   │
│  │img1 │ │img2 │ │img3 │ │img4 │   │
│  │ [×] │ │     │ │ [×] │ │     │   │ ← Кнопки удаления
│  └─────┘ └─────┘ └─────┘ └─────┘   │
│                                     │
└─────────────────────────────────────┘
```

- Каждое превью показывает кнопку [×] для удаления
- [Done] — выход из режима редактирования
- Удаление без подтверждения (можно вернуть через Undo в будущих версиях)

------

### Превью изображения в библиотеке

```
┌─────────────────┐
│                 │
│   [thumbnail]   │
│                 │
│             [×] │ ← только в Edit mode
└─────────────────┘
```

| Параметр           | Значение                               |
| ------------------ | -------------------------------------- |
| Размер в collapsed | 56×56 px                               |
| Размер в grid      | (ширина экрана - отступы) / 4          |
| Border radius      | 8 px                                   |
| Фон                | Светло-серый (для прозрачных PNG)      |
| Рамка выделения    | Нет (выделение только для размещённых) |

**Взаимодействие:**

- **Tap** — ничего (для размещения нужно drag)
- **Long press** — показать увеличенное превью (popup)
- **Drag** — начать перетаскивание на PDF

------

## Жесты и взаимодействие

### Режимы работы

Приложение имеет два неявных режима:

| Режим         | Условие                 | Жесты               |
| ------------- | ----------------------- | ------------------- |
| **View mode** | Нет выделенного объекта | Управление PDF      |
| **Edit mode** | Есть выделённый объект  | Управление объектом |

Переключение происходит автоматически:

- Tap на размещённом изображении → Edit mode
- Tap вне объектов → View mode

### View mode (просмотр PDF)

| Жест                 | Действие                       |
| -------------------- | ------------------------------ |
| Drag одним пальцем   | Прокрутка PDF                  |
| Pinch двумя пальцами | Масштабирование PDF            |
| Double tap           | Toggle между Fit Width и 100%  |
| Tap на изображении   | Выделить → переход в Edit mode |

### Edit mode (редактирование объекта)

| Жест                             | Действие                             |
| -------------------------------- | ------------------------------------ |
| Drag на объекте                  | Перемещение объекта                  |
| Drag на угловом маркере          | Пропорциональное изменение размера   |
| Drag на боковом маркере          | Непропорциональное изменение размера |
| Pinch двумя пальцами на объекте  | Масштабирование объекта              |
| Rotate двумя пальцами на объекте | Вращение объекта                     |
| Tap вне объекта                  | Снять выделение → View mode          |
| Tap на другом объекте            | Переключить выделение                |

**Важно:** В Edit mode жесты pinch/drag вне выделенного объекта всё ещё управляют PDF.

### Drag изображения из библиотеки

1. Long press на превью в Bottom Sheet (200ms) — начало drag
2. Превью "отрывается" и следует за пальцем
3. Bottom Sheet автоматически сворачивается в collapsed
4. Drop на область PDF — размещение изображения
5. Drop вне PDF — отмена

**Визуальная обратная связь:**

- При начале drag: Haptic feedback (light)
- Превью под пальцем: 80% размера оригинала, полупрозрачное
- Оригинал в библиотеке: затемняется на 50%
- При drop: Haptic feedback (medium)

------

## Масштабирование (Zoom)

### Поведение

| Параметр             | Значение                       |
| -------------------- | ------------------------------ |
| Масштаб по умолчанию | Fit Width                      |
| Минимальный масштаб  | 50% или Fit Width (что меньше) |
| Максимальный масштаб | 500%                           |
| Double tap zoom      | Toggle между Fit Width и 100%  |

### Жесты масштабирования

**Pinch (щипок):**

- Масштабирование относительно центра между пальцами (focal point)
- Плавная анимация
- Работает в View mode и Edit mode (для PDF)

**Double tap:**

- Первый tap: zoom к 100% с центром в точке касания
- Второй tap: вернуться к Fit Width
- Анимированный переход (300ms)

### Технические детали рендеринга

| Параметр              | Значение                         |
| --------------------- | -------------------------------- |
| Библиотека просмотра  | **pdfx**                         |
| Библиотека сохранения | **Syncfusion PDF**               |
| Качество              | `FilterQuality.high`             |
| Ленивая загрузка      | Да — видимые страницы + 2 буфера |
| Кэширование           | LRU-кэш на 10 страниц            |

**Ленивая загрузка:**

- Рендерятся только видимые страницы + 2 страницы до и после
- При прокрутке страницы вне видимой области отменяют рендеринг
- Кэш хранит до 10 отрендеренных страниц
- Каждый уровень масштаба кэшируется отдельно

------

## Работа с изображениями

### Библиотека изображений

Библиотека **глобальная** — одна на всё приложение, не привязана к конкретному PDF.

#### Способы добавления

| Способ         | Описание                                   |
| -------------- | ------------------------------------------ |
| **Кнопка [+]** | Открывает Action Sheet с выбором источника |
| **Paste**      | Вставить изображение из буфера обмена      |

**Action Sheet при нажатии [+]:**

```
┌─────────────────────────────────────┐
│                                     │
│  Add Image                          │
│                                     │
│  ┌─────────────────────────────┐    │
│  │  📁  Choose from Files      │    │
│  ├─────────────────────────────┤    │
│  │  🖼  Choose from Gallery     │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │        Cancel               │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

| Источник            | Описание                                                     |
| ------------------- | ------------------------------------------------------------ |
| Choose from Files   | Системный file picker (Files app на iOS, Storage Access на Android) |
| Choose from Gallery | Image picker (Photos на iOS, Gallery на Android)             |

**Поддерживаемые форматы:** PNG, JPG, JPEG, GIF, WebP, BMP, TIFF

**Ограничения:**

| Параметр                  | Значение     |
| ------------------------- | ------------ |
| Максимальный размер файла | 50 MB        |
| Максимальное разрешение   | 4096×4096 px |

#### Хранение файлов

При добавлении в библиотеку изображение **копируется** в директорию приложения:

**iOS:**

```
<App>/Documents/images/{uuid}.{ext}
```

**Android:**

```
<App>/files/images/{uuid}.{ext}
```

**Особенности:**

- Файлы переименовываются с UUID для избежания конфликтов
- Оригинальный файл можно удалить после добавления
- В базе данных хранится путь к копии

#### Хранение метаданных

Библиотека хранится в **базе данных Isar**:

| Поле      | Тип      | Описание               |
| --------- | -------- | ---------------------- |
| id        | int      | Автоинкремент          |
| uuid      | String   | UUID файла             |
| filename  | String   | Оригинальное имя файла |
| path      | String   | Путь к копии           |
| width     | int      | Ширина в пикселях      |
| height    | int      | Высота в пикселях      |
| createdAt | DateTime | Дата добавления        |
| order     | int      | Порядок в библиотеке   |

#### Удаление из библиотеки

1. Развернуть Bottom Sheet до Expanded
2. Нажать [Edit]
3. Нажать [×] на нужном изображении
4. Изображение удаляется без подтверждения

**Что происходит при удалении:**

- Удаляется запись из Isar
- Удаляется скопированный файл
- Уже размещённые на PDF экземпляры **остаются** (данные в памяти)

------

### Размещение изображений на PDF

#### Процесс размещения

1. Long press на превью в библиотеке (Bottom Sheet)
2. Drag изображение на нужную страницу PDF
3. Drop — изображение размещается

#### Начальный размер при размещении

| Параметр             | Значение            |
| -------------------- | ------------------- |
| Максимальная ширина  | 40% ширины страницы |
| Максимальная высота  | 40% высоты страницы |
| Сохранение пропорций | Да                  |

Изображение масштабируется так, чтобы вписаться в 40% страницы с сохранением пропорций.

#### Позиционирование при drop

- Центр изображения = точка drop
- Автоматический clamping: изображение не выходит за границы страницы при размещении
- После размещения можно перетащить за границы

#### Привязка к странице

Каждое размещённое изображение привязано к конкретной странице:

| Что хранится  | Описание                                       |
| ------------- | ---------------------------------------------- |
| pageIndex     | Номер страницы (0-based)                       |
| x, y          | Координаты левого верхнего угла (в PDF points) |
| width, height | Размеры (в PDF points)                         |
| rotation      | Угол поворота (в радианах)                     |
| imageId       | Ссылка на изображение в библиотеке             |

**Нельзя** перетащить изображение на другую страницу — только удалить и разместить заново.

#### Множественное размещение

Одно изображение из библиотеки можно разместить многократно:

- На одной странице несколько раз
- На разных страницах документа
- Каждое размещение независимо (своя позиция, размер, поворот)

------

### Редактирование размещённых изображений

#### Выделение

**Tap** на размещённом изображении выделяет его.

**Внешний вид выделенного объекта:**

```
        ●              ●          ← Угловые маркеры (круглые, залитые)
          ┌──────────┐
          │          │
        ● │  image   │ ●          ← Боковые маркеры
          │          │
          └──────────┘
        ●              ●
        
       12.5 × 8.3 cm              ← Метка размеров
```

| Элемент             | Описание                                         |
| ------------------- | ------------------------------------------------ |
| Рамка выделения     | Синяя (#007AFF на iOS, #2196F3 на Android), 2 px |
| Угловые маркеры     | Круги ⌀20 px, залитые синим, белая обводка 2 px  |
| Боковые маркеры     | Круги ⌀16 px, залитые синим, белая обводка 2 px  |
| Touch area маркеров | 48×48 px (невидимая область касания)             |
| Метка размеров      | Под объектом, 16 px отступ                       |

#### Маркеры изменения размера

**Угловые маркеры (4 шт.):**

| Параметр          | Значение                           |
| ----------------- | ---------------------------------- |
| Расположение      | Углы объекта                       |
| Визуальный размер | ⌀20 px                             |
| Touch area        | 48×48 px                           |
| Действие          | Пропорциональное изменение размера |

**Боковые маркеры (4 шт.):**

| Параметр          | Значение                                |
| ----------------- | --------------------------------------- |
| Расположение      | Середины сторон                         |
| Визуальный размер | ⌀16 px                                  |
| Touch area        | 48×48 px                                |
| Действие          | Непропорциональное изменение (одна ось) |

**Минимальный размер объекта:** 40×40 px (touch-friendly)

#### Перемещение

- Drag в любом месте объекта (кроме маркеров) перемещает его
- Объект можно перетащить за границы страницы
- При перемещении показывается позиция в реальном времени

#### Вращение

**Жест:** Rotate двумя пальцами на выделенном объекте

- Вращение вокруг центра объекта
- Свободный угол (не ограничен шагами)
- Haptic feedback при пересечении 0°, 90°, 180°, 270°

#### Отображение размеров

При выделении объекта показывается метка:

```
┌────────────────┐
│  12.5 × 8.3 cm │
└────────────────┘
```

| Параметр     | Значение                                  |
| ------------ | ----------------------------------------- |
| Позиция      | Под нижней стороной объекта, отступ 16 px |
| Формат       | `W × H unit`                              |
| Единицы      | cm или inch (из настроек системы)         |
| Tap по метке | Toggle между cm и inch                    |

**Определение единиц по умолчанию:**

- USA (регион устройства) → inches
- Все остальные регионы → centimeters

Метка поворачивается вместе с объектом, но всегда остаётся читаемой (не вверх ногами).

#### Удаление

**Способ удаления:**

1. Tap на изображении (выделить)
2. Tap на кнопке [Delete] в AppBar

Удаление происходит **без подтверждения**.

**Снятие выделения:** Tap в любом месте вне объекта.

------

### Границы страницы

**При размещении (drop):**

- Изображение автоматически ограничивается границами (clamping)
- Центр попадает в точку drop, но изображение не выходит за края

**После размещения:**

- Изображение можно перетащить за границы страницы
- Изображение можно растянуть за пределы страницы
- При сохранении PDF — части за границами сохраняются (нет обрезки)

------

### PDF с разными размерами страниц

Приложение корректно работает с PDF, где страницы имеют разные размеры:

- Каждая страница рендерится со своими размерами
- При размещении изображения учитываются размеры конкретной страницы
- Прокрутка адаптируется под разную ширину страниц

------

## Хранение данных

### Позиции размещённых изображений

Позиции хранятся **в памяти** (state management), не персистентно:

| Что                     | Где хранится                   |
| ----------------------- | ------------------------------ |
| Библиотека изображений  | Isar (персистентно)            |
| Размещённые изображения | Память (теряется при закрытии) |
| После Export/Share      | Встроены в PDF навсегда        |

**Важно:** Если закрыть приложение или документ без Export — все размещённые изображения потеряются.

### Состояние документа

| Состояние     | Описание                           |
| ------------- | ---------------------------------- |
| Без изменений | Только открыт, ничего не размещено |
| С изменениями | Есть размещённые изображения       |

**Что считается изменением:**

- Добавление изображения (drag & drop)
- Удаление изображения

**Что НЕ считается изменением:**

- Перемещение изображения
- Изменение размера
- Поворот

### Недавние файлы

| Параметр                | Значение                         |
| ----------------------- | -------------------------------- |
| Максимальное количество | 12 файлов                        |
| Сортировка              | По дате последнего открытия      |
| Хранение                | SharedPreferences / UserDefaults |

**Структура записи:**

| Поле       | Тип      | Описание                 |
| ---------- | -------- | ------------------------ |
| path       | String   | Путь к файлу             |
| name       | String   | Имя файла                |
| lastOpened | DateTime | Дата последнего открытия |

------

## Сохранение и экспорт

### Share/Export

Основное действие для сохранения результата — кнопка **[Share]** в AppBar.

**Алгоритм работы:**

1. **Если изображений не размещено:**
   - Отправляется оригинальный PDF напрямую
2. **Если есть размещённые изображения:**
   - Создаётся временная копия PDF с внедрёнными изображениями
   - Изображения внедряются через Syncfusion PDF
   - Открывается системный Share Sheet
   - После отправки временный файл удаляется

**Share Sheet позволяет:**

- Сохранить в Files (iOS) / Storage (Android)
- Отправить через почту, мессенджеры
- Сохранить в облачные сервисы
- AirDrop (iOS)

### Закрытие с несохранёнными изменениями

При нажатии [←] Back с несохранёнными изменениями показывается диалог:

```
┌─────────────────────────────────────┐
│                                     │
│      Unsaved Changes                │
│                                     │
│  Do you want to save changes        │
│  to "Report.pdf"?                   │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         Save                │    │ ← Primary action
│  └─────────────────────────────┘    │
│  ┌─────────────────────────────┐    │
│  │        Discard              │    │
│  └─────────────────────────────┘    │
│  ┌─────────────────────────────┐    │
│  │        Cancel               │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

| Кнопка  | Действие                                                     |
| ------- | ------------------------------------------------------------ |
| Save    | Открыть Share Sheet, после успешной отправки — закрыть документ |
| Discard | Закрыть без сохранения                                       |
| Cancel  | Вернуться к документу                                        |

------

## Настройки

Настройки приложения используют **системные настройки** платформы:

**iOS:** Settings app → miniPDFSign **Android:** System Settings → Apps → miniPDFSign → Settings (или внутри приложения)

### Доступные настройки

| Настройка | Значения                      | По умолчанию                          |
| --------- | ----------------------------- | ------------------------------------- |
| Language  | System Default, список языков | System Default                        |
| Units     | Centimeters, Inches           | По региону (USA=inches, остальные=cm) |

### Язык

- **System Default** — использовать язык системы
- Или выбрать конкретный язык из списка

### Единицы измерения

Влияет на отображение размеров выделенного объекта.

**Определение по умолчанию:**

```
if (device.region == 'US') {
  defaultUnit = 'inch';
} else {
  defaultUnit = 'cm';
}
```

**Tap по метке размеров** на выделенном объекте — быстрое переключение между cm/inch (сохраняется в настройки).

------

## Локализация

### Поддерживаемые языки

**50+ языков**, включая:

| Код   | Язык                     | Код   | Язык                    |
| ----- | ------------------------ | ----- | ----------------------- |
| ar    | العربية (Arabic)         | nl    | Nederlands (Dutch)      |
| az    | Azərbaycan (Azerbaijani) | nb    | Norsk (Norwegian)       |
| be    | Беларуская (Belarusian)  | pl    | Polski (Polish)         |
| bg    | Български (Bulgarian)    | pt_BR | Português (Brazil)      |
| ca    | Català (Catalan)         | pt_PT | Português (Portugal)    |
| cs    | Čeština (Czech)          | ro    | Română (Romanian)       |
| da    | Dansk (Danish)           | ru    | Русский (Russian)       |
| de    | Deutsch (German)         | sk    | Slovenčina (Slovak)     |
| el    | Ελληνικά (Greek)         | sl    | Slovenščina (Slovenian) |
| en_AU | English (Australia)      | sq    | Shqip (Albanian)        |
| en_GB | English (UK)             | sr    | Српски (Serbian)        |
| en_NZ | English (New Zealand)    | sv    | Svenska (Swedish)       |
| en_US | English (US)             | ta    | தமிழ் (Tamil)            |
| es_AR | Español (Argentina)      | th    | ไทย (Thai)              |
| es_ES | Español (Spain)          | tr    | Türkçe (Turkish)        |
| es_MX | Español (Mexico)         | uk    | Українська (Ukrainian)  |
| et    | Eesti (Estonian)         | uz    | O'zbek (Uzbek)          |
| eu    | Euskara (Basque)         | vi    | Tiếng Việt (Vietnamese) |
| fa    | فارسی (Persian)          | zh_CN | 中文 (Simplified)       |
| fi    | Suomi (Finnish)          | zh_TW | 中文 (Traditional)      |
| fil   | Filipino                 | he    | עברית (Hebrew)          |
| fr    | Français (French)        | hi    | हिन्दी (Hindi)           |
| hr    | Hrvatski (Croatian)      | hu    | Magyar (Hungarian)      |
| hy    | Armenian                 | id    | Bahasa Indonesia        |
| is    | Íslenska (Icelandic)     | it    | Italiano (Italian)      |
| ja    | 日本語 (Japanese)        | ka    | ქართული (Georgian)      |
| kk    | Қазақ (Kazakh)           | km    | ខ្មែរ (Khmer)            |
| ko    | 한국어 (Korean)          | lt    | Lietuvių (Lithuanian)   |
| lv    | Latviešu (Latvian)       | ms    | Bahasa Melayu (Malay)   |
| mn    | Монгол (Mongolian)       | my    | မြန်မာ (Burmese)        |

### RTL языки

Полная поддержка right-to-left для:

- Arabic (ar)
- Hebrew (he)
- Persian (fa)

UI автоматически зеркалится для RTL локалей.

------

## Известные ограничения

### Обработка изображений

| Особенность                 | Статус                                                       |
| --------------------------- | ------------------------------------------------------------ |
| PNG с прозрачностью (alpha) | В UI отображается корректно. При сохранении — зависит от Syncfusion |
| EXIF-ориентация             | **Не обрабатывается** — фото могут отображаться повёрнутыми  |
| Анимированные GIF           | Показывается только первый кадр                              |

### Редактирование

| Особенность                     | Статус                                       |
| ------------------------------- | -------------------------------------------- |
| Множественное выделение         | **Нет** — только один объект                 |
| Snap/привязка                   | **Нет** — свободное позиционирование         |
| Ввод точных координат           | **Нет** — только визуальное редактирование   |
| Редактирование после Export     | **Нет** — изображения "запекаются" в PDF     |
| Перетаскивание между страницами | **Нет** — только удалить и разместить заново |

### PDF

| Особенность               | Статус                       |
| ------------------------- | ---------------------------- |
| Защищённые PDF (password) | **Не поддерживаются**        |
| PDF с формами             | Формы не интерактивны        |
| Поиск текста              | **Нет**                      |
| Аннотации                 | Только просмотр существующих |

### Платформы

| Особенность            | Статус                           |
| ---------------------- | -------------------------------- |
| iPad / Android tablets | Работает, но UI не оптимизирован |
| Split View (iPad)      | **Не поддерживается**            |
| Keyboard shortcuts     | **Нет**                          |

------

## Haptic Feedback

| Действие                                  | Тип feedback  |
| ----------------------------------------- | ------------- |
| Начало drag из библиотеки                 | Light impact  |
| Drop на PDF                               | Medium impact |
| Выделение объекта                         | Light impact  |
| Пересечение 0°/90°/180°/270° при вращении | Light impact  |
| Удаление объекта                          | Medium impact |

------

## Доступность (Accessibility)

- VoiceOver (iOS) / TalkBack (Android) поддержка
- Достаточный контраст для всех UI элементов
- Минимальный размер touch targets: 44×44 px (iOS) / 48×48 dp (Android)
- Semantic labels для всех интерактивных элементов

------

## Планы на будущее

### Undo/Redo

Возможность отменять и повторять действия:

- Кнопки ↶/↷ в AppBar при наличии истории
- Shake to Undo (iOS)
- Глубина истории: 30 операций

### Dark Mode

Поддержка тёмной темы:

- Автоматическое переключение по системным настройкам
- Адаптация всех UI элементов

### Камера как источник изображений

Добавить в Action Sheet:

- 📷 Take Photo — открыть камеру
- Автофокус и автоэкспозиция

### Document Scanner

Интеграция со сканером документов:

- iOS: VisionKit
- Android: ML Kit

### Onboarding

Краткий туториал при первом запуске:

- Swipe-based, 3-4 экрана
- Показать основные жесты
- Возможность пропустить

### Swipe to delete

В списке Recent Files:

- Swipe left → Delete
- С возможностью Undo

### iPad / Tablet оптимизация

- Sidebar вместо Bottom Sheet на больших экранах
- Split View поддержка
- Keyboard shortcuts

### Обработка EXIF-ориентации

Автоматическое применение EXIF-поворота при импорте.

### Множественное выделение

- Long press + tap для добавления к выделению
- Групповые операции: перемещение, удаление

### Snap/привязка

Привязка при перемещении:

- К краям страницы
- К центру страницы
- К другим объектам

### iCloud / Google Drive синхронизация

Синхронизация библиотеки изображений между устройствами.